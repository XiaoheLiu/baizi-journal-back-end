(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(245)},140:function(e,t,a){},142:function(e,t,a){},144:function(e,t,a){},243:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(104),i=a.n(c),o=a(13),u=a(7),s=a(106),l=a(10),m=a(11),p=a(14),f=a(12),h=a(15),d=a(251),E=a(254),b=a(246),v=a(32),g=a(252),O=function(e){var t=e.component,a=Object(v.a)(e,["component"]),n=localStorage.getItem("baiziUserToken");return r.a.createElement(b.a,Object.assign({},a,{render:function(){return n?r.a.createElement(t,null):r.a.createElement(g.a,{to:"/"})}}))},y=function(e){var t=e.component,a=Object(v.a)(e,["component"]),n=localStorage.getItem("baiziUserToken");return r.a.createElement(b.a,Object.assign({},a,{render:function(){return n?r.a.createElement(g.a,{to:"/write"}):r.a.createElement(t,null)}}))},w=a(247),j=a(253),N=a(23),S=a(5),x=a.n(S),k=a(9),z=a(107),I=a.n(z),U=function(e){var t=e.method,a=e.url,n=e.data,r=e.headers;return I()({method:t,url:a,data:n,headers:Object(N.a)({"Content-Type":"Application/json"},r)}).then(C)},C=function(e){return e.data},T=function(){var e=Object(k.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",url:"/api/baizi",data:t,headers:{authorization:localStorage.getItem("baiziUserToken")}},e.next=3,U(a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(k.a)(x.a.mark(function e(){var t,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",url:"/api/baizi",headers:{authorization:localStorage.getItem("baiziUserToken")}},e.next=3,U(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(k.a)(x.a.mark(function e(t,a){var n,r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",url:"".concat("/api/user","/create"),data:{username:t,password:a}},e.next=3,U(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(k.a)(x.a.mark(function e(t,a){var n,r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",url:"".concat("/api/user","/auth"),data:{username:t,password:a}},e.next=3,U(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(k.a)(x.a.mark(function e(){var t,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",url:"/api/user",headers:{authorization:localStorage.getItem("baiziUserToken")}},e.next=3,U(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),D=function(){return function(){var e=Object(k.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M().catch(function(){console.log("Error: can't fetch baizi.")});case 2:(a=e.sent)&&t({type:"FETCH_BAIZIS",payload:a});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(k.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().catch(function(e){return console.log(e)});case 2:a=e.sent,console.log(a),a&&t({type:"GET_USER",payload:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){var e=a.props,t=e.logoutUser,n=e.history;localStorage.setItem("baiziUserToken",""),t(),n.push("/")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isSignedIn,a=e.getUser;t&&a()}},{key:"render",value:function(){var e=this.props,t=e.isSignedIn,a=e.username;return r.a.createElement("div",{className:"ui brown fixed inverted menu"},r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"header item"},r.a.createElement(w.a,{to:"/"},"\u767e\u5b57\u672c")),t&&r.a.createElement(w.a,{to:"/write",className:"item"},r.a.createElement("i",{className:"edit outline icon"}),"\u5199"),t&&r.a.createElement(w.a,{to:"/read",className:"item"},r.a.createElement("i",{className:"newspaper outline icon"}),"\u8bfb"),t&&r.a.createElement(w.a,{to:"/search",className:"item"},r.a.createElement("i",{className:"search icon"}),"\u641c"),r.a.createElement("div",{className:"right inverted brown menu"},!t&&r.a.createElement(w.a,{to:"/signin",className:"item"},r.a.createElement("i",{className:"sign in alternate icon"}),"\u767b\u5165"),!t&&r.a.createElement(w.a,{to:"/signup",className:"item"},r.a.createElement("strong",null,"\u6ce8\u518c")),t&&r.a.createElement("a",{className:"item"},r.a.createElement("i",{className:"user circle icon"})," ",a),t&&r.a.createElement("a",{className:"item",onClick:this.logout},r.a.createElement("i",{className:"sign out alternate icon"})," \u767b\u51fa"))))}}]),t}(n.Component),G=Object(j.a)(Object(o.b)(function(e){return{isSignedIn:localStorage.getItem("baiziUserToken"),username:e.user.username}},{logoutUser:function(){return{type:"LOGOUT_USER"}},getUser:F})(B)),L=a(37),Y=function(e){var t=e.onClose;return r.a.createElement("div",{className:"ui brown message"},r.a.createElement("i",{className:"close icon",onClick:t}),r.a.createElement("div",{className:"header"},"\xa0\u767e\u5b57\u8ba1\u6570\u89c4\u5219\xa0"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u6bcf\u4e2a\u6c49\u5b57\u53601\u683c\uff0c\u6807\u70b9\u7b26\u53f7\u4e0d\u5360\u683c\u3002"),r.a.createElement("li",null,'\u5176\u4ed6\u8bed\u8a00\u6587\u5b57\u6216\u6570\u5b57\u53ef\u6309\u7167\u81ea\u5df1\u7684\u6807\u51c6\u6765\u8ba1\u6570\uff0c\u5e76\u5c06\u4f60\u8ba4\u4e3a\u5360\u4e00\u683c\u7684\u5185\u5bb9\u7528\u82f1\u6587\u4e2d\u62ec\u53f7"[]"\u62ec\u8d77\u6765\uff0c\u4f8b\u5982"[word]"\u3001"[\u3042]"\u3002'),r.a.createElement("li",null,"\u9898\u76ee\u3001\u5929\u6c14\u53ef\u4e0d\u586b\uff0c\u5e76\u4e14\u4e0d\u4f1a\u88ab\u8ba1\u5165\u5b57\u6570\u3002")))},P=function(e){var t=e.onClose;return r.a.createElement("div",{className:"ui error message"},r.a.createElement("i",{className:"close icon",onClick:t}),r.a.createElement("div",{className:"header"},"\xa0\u63d0\u4ea4\u5931\u8d25\uff1a\u767e\u5b57\u65e5\u671f\u91cd\u590d\xa0"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u6bcf\u5929\u53ea\u80fd\u5199\u4e00\u7bc7\u767e\u5b57\uff01")))},W=(a(140),a(72)),H=a.n(W);var Z=function(){return H()().format("YYYY-MM-DD")},$=function(e){var t=e.match(/[\u4e00-\u9fa5\u3002\uff1f\uff01\uff0c\u3001\uff1b\uff1a\u201c\u201d\u2018\u2019\uff08\uff09\u300a\u300b\u3008\u3009\u3010\u3011\u300e\u300f\u300c\u300d\ufe43\ufe44\u3014\u3015\u2026\u2014\uff5e\ufe4f\uffe5~`!@#$%^&*(){};:"'<,.>?\/\\|_+=-]|(\[([^\]]+)\])/g);return null==t?"":t.join("")},J=function(e){var t,a=e.date,n=e.content,c=e.weather,i=e.title;return r.a.createElement("div",{className:"baiziDisplay"},r.a.createElement("div",{className:"ui huge message"},r.a.createElement("h2",{className:"ui left floated header  baiziTitle"},i),r.a.createElement("h2",{className:"ui right aligned header"},"".concat((t=a,H()(t).format("YYYY\u5e74 M\u6708 D \u65e5 ddd"))," ").concat(c)),r.a.createElement("p",null,function(e){var t=e.match(/[\u4e00-\u9fa5\u3002\uff1f\uff01\uff0c\u3001\uff1b\uff1a\u201c\u201d\u2018\u2019\uff08\uff09\u300a\u300b\u3008\u3009\u3010\u3011\u300e\u300f\u300c\u300d\ufe43\ufe44\u3014\u3015\u2026\u2014\uff5e\ufe4f\uffe5~`!@#$%^&*(){};:"'<,.>?\/\\|_+=-]|(\[([^\]]+)\])/g);return(null==t?[]:t).map(function(e,t){return r.a.createElement("span",{key:t,className:/[\u4e00-\u9fa5]|(\[([^\]]+)\])/.test(e)?"character":"punctuation"},/(\[([^\]]+)\])/.test(e)?e.replace(/[\[\]]/g,""):e)})}(n))))},X=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={content:"",date:Z(),title:"",weather:"",showInfoMsg:!0,showErrorMsg:!1},a.onInputChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.onFormSubmit=function(e){e.preventDefault();var t=a.state,n=(t.showInfoMsg,t.showErrorMsg,Object(v.a)(t,["showInfoMsg","showErrorMsg"])),r=a.props.baiziDates;r&&(r.includes(n.date)?a.setState({showErrorMsg:!0}):(a.props.onSubmit(n),a.setState({content:"",date:Z(),title:"",weather:""})))},a.onCloseMessage=function(e){a.setState(Object(L.a)({},e,!1))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.content,n=t.date,c=t.title,i=t.weather,o=t.showInfoMsg,u=t.showErrorMsg,s=function(e){var t=0,a=/[\u4e00-\u9fa5]/g,n=/\[([^\]]+)\]/g;return null!=e.match(a)&&(t=e.match(a).length),null!=e.match(n)&&(t+=e.match(n).length),t}(a),l=100===s?{color:"green",disabled:!1,text:"\u53d1\u5e03"}:{color:"",disabled:!0,text:"\u672a\u5b8c\u6210"};return r.a.createElement("div",{style:{maxWidth:"62em",width:"90%",margin:"0 auto"}},r.a.createElement("h4",{className:"ui horizontal divider header",id:"xiebaizi"},r.a.createElement("i",{className:"edit outline icon"})),u&&r.a.createElement(P,{onClose:function(){return e.onCloseMessage("showErrorMsg")}}),o&&r.a.createElement(Y,{onClose:function(){return e.onCloseMessage("showInfoMsg")}}),r.a.createElement("div",{className:"ui centered segment"},r.a.createElement("form",{className:"ui form",onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"three fields"},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"\u9898\u76ee:"),r.a.createElement("input",{type:"text",name:"title",value:c,autoComplete:"off",onChange:this.onInputChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"\u65e5\u671f:"),r.a.createElement("input",{type:"date",name:"date",value:n,onChange:this.onInputChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"\u5929\u6c14:"),r.a.createElement("select",{className:"ui fluid dropdown",onChange:this.onInputChange,name:"weather",value:i},r.a.createElement("option",{value:""},"--\uff08\u9009\u586b\uff09--"),r.a.createElement("option",{value:"\u2600\ufe0f"},"\u2600\ufe0f"),r.a.createElement("option",{value:"\u26c5\ufe0f"},"\u26c5\ufe0f"),r.a.createElement("option",{value:"\ud83c\udf26"},"\ud83c\udf26"),r.a.createElement("option",{value:"\u2601\ufe0f"},"\u2601\ufe0f"),r.a.createElement("option",{value:"\ud83c\udf27"},"\ud83c\udf27"),r.a.createElement("option",{value:"\u26c8"},"\u26c8"),r.a.createElement("option",{value:"\u2744\ufe0f"},"\u2744\ufe0f"),r.a.createElement("option",{value:"\ud83c\udf2b"},"\ud83c\udf2b")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"\u767e\u5b57:"),r.a.createElement("textarea",{value:a,name:"content",onChange:this.onInputChange})),r.a.createElement("p",null," ",s," / 100 \u5b57"),r.a.createElement("button",{className:"ui ".concat(l.color," button"),disabled:l.disabled,type:"submit"},l.text)),r.a.createElement("div",{className:"ui horizontal divider"},"\u9884\u89c8"),r.a.createElement(J,{content:a,date:n,weather:i,title:c,key:1})))}}]),t}(n.Component),V=(a(142),function(){return r.a.createElement("div",{style:{marginTop:"-1em"}},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"\u767e\u5b57\uff0c\u662f\u4e00\u79cd\u751f\u6d3b\u65b9\u5f0f"),r.a.createElement("hr",null),r.a.createElement("p",null,"\u4e5f\u8bb8\u4e0d\u4f1a\u767e\u70bc\u6210\u94a2\uff0c\u4f46\u5374\u53ef\u4ece\u767e\u5b57\u4e4b\u95f4\u7aa5\u89c1\u4e00\u4e2a\u771f\u5b9e\u7684\u81ea\u5df1\u3002")),r.a.createElement("h4",{className:"ui center aligned header"},"\u8bd5\u5199\u767e\u5b57"),r.a.createElement(X,{onSubmit:function(e){}}),r.a.createElement("p",{className:"ui center aligned sub header"},"\u6ce8\uff1a\u8bd5\u5199\u529f\u80fd\u4e0d\u53ef\u4fdd\u5b58\u3002\u5982\u60f3\u521b\u5efa\u81ea\u5df1\u7684\u767e\u5b57\u672c\uff0c\u8bf7\u70b9\u51fb\u53f3\u4e0a\u89d2\u6ce8\u518c\u8d26\u53f7\u3002"))}),q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).onBaiziInputSubmit=function(e){var t=$(e.content);a.props.createBaizi(Object(N.a)({},e,{content:t})),a.props.history.push("/read")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.baiziDates.length||this.props.fetchBaizis()}},{key:"render",value:function(){return r.a.createElement(X,{onSubmit:this.onBaiziInputSubmit,baiziDates:this.props.baiziDates})}}]),t}(n.Component),K=Object(j.a)(Object(o.b)(function(e){return{baiziDates:e.baizis.map(function(e){return e.date})}},{createBaizi:function(e){return function(){var t=Object(k.a)(x.a.mark(function t(a){var n;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e).catch(function(){console.log("Error: can't create baizi.")});case 2:(n=t.sent)&&a({type:"CREATE_BAIZI",payload:Object(N.a)({},e,{_id:n.baiziId})});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},fetchBaizis:D})(q)),Q=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.baizis.length||this.props.fetchBaizis()}},{key:"renderCards",value:function(){return this.props.baizis.map(function(e){return r.a.createElement(J,{content:e.content,date:e.date,weather:e.weather,title:e.title,key:e._id})})}},{key:"render",value:function(){return r.a.createElement("div",{style:{maxWidth:"62em",width:"90%",margin:"10px auto"}},r.a.createElement("h4",{className:"ui horizontal divider header",id:"dubaizi"},r.a.createElement("i",{className:"newspaper outline icon"})),!this.props.baizis.length&&r.a.createElement("div",{className:"ui brown message"},r.a.createElement("h2",null,"\u767e\u5b57\u672c\u7a7a\u7a7a\u5982\u4e5f\u2026\u2026"),r.a.createElement("p",null,"\u5feb\u53bb\u5199\u7b2c\u4e00\u7bc7\u767e\u5b57\u5427\uff01")),this.renderCards())}}]),t}(n.Component),ee=Object(o.b)(function(e){return{baizis:e.baizis}},{fetchBaizis:D})(Q),te=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui warning message",style:{maxWidth:"62em",width:"90%",margin:"10vh auto"}},r.a.createElement("h1",null,"\u641c\u7d22\u529f\u80fd\u8fd8\u5728\u5f00\u53d1\u4e2d\uff01"),r.a.createElement("li",null,"\u6839\u636e\u65e5\u671f\u8303\u56f4\u641c\u7d22"),r.a.createElement("li",null,"\u6839\u636e\u5173\u952e\u8bcd\u641c\u7d22"))}}]),t}(n.Component),ae=(a(144),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,"Copyright 2019 \xb7 Athena Liu and Shi Cheng"))}),ne=a(249),re=a(248),ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(c)))).renderField=function(e){var t=e.input,a=e.label,n=e.type,c=e.meta,i=c.touched,o=c.error,u="field ".concat(o&&i?"error":"");return r.a.createElement("div",{className:u},r.a.createElement("label",null,a),r.a.createElement("input",Object.assign({},t,{placeholder:a,type:n})),i&&o&&r.a.createElement("p",{style:{color:"maroon",marginTop:"5px"}},o))},a.onSignInFormSubmit=function(){var e=Object(k.a)(x.a.mark(function e(t){var n,r,c,i,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.authUser,c=n.history,i=n.getUser,e.next=3,r(t).catch(function(){});case 3:(o=e.sent)&&(localStorage.setItem("baiziUserToken",o),c.push("/read"),i());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,n=e.invalid,c=e.errorMessage;return r.a.createElement("div",{className:"ui segment",style:{width:"90%",maxWidth:"500px",margin:"0 auto"}},r.a.createElement("h1",{className:"ui center aligned header"},"\u767b\u5165"),r.a.createElement("form",{className:"ui form",onSubmit:t(this.onSignInFormSubmit)},r.a.createElement(ne.a,{name:"username",label:"\u7528\u6237\u540d",component:this.renderField,type:"text"}),r.a.createElement(ne.a,{name:"password",label:"\u5bc6\u7801",component:this.renderField,type:"password"}),r.a.createElement("button",{className:"ui button",type:"submit",disabled:a|n},"\u767b\u5165")),c&&r.a.createElement("p",{style:{color:"red",marginTop:"5px"}},c))}}]),t}(n.Component),ie=Object(j.a)(Object(o.b)(function(e){return{errorMessage:e.user.errorMessage}},{authUser:function(e){return function(){var t=Object(k.a)(x.a.mark(function t(a){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e.username,e.password).catch(function(){a({type:"LOGIN_ERROR",payload:{errorMessage:"\u767b\u5f55\u5931\u8d25\uff1a\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff01"}})});case 2:if(n=t.sent,!(r=n.token)){t.next=7;break}return a({type:"AUTH_USER",payload:{token:r}}),t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},getUser:F})(Object(re.a)({form:"SignIn",validate:function(e){var t={};return e.username||(t.username="\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"),e.password||(t.password="\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),t}})(ce))),oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(c)))).renderField=function(e){var t=e.input,a=e.label,n=e.type,c=e.meta,i=c.touched,o=c.error,u="field ".concat(o&&i?"error":"");return r.a.createElement("div",{className:u},r.a.createElement("label",null,a),r.a.createElement("input",Object.assign({},t,{placeholder:a,type:n})),i&&o&&r.a.createElement("p",{style:{color:"maroon",marginTop:"5px"}},o))},a.onSignUpFormSubmit=function(){var e=Object(k.a)(x.a.mark(function e(t){var n,r,c,i,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.createUser,c=n.history,i=n.getUser,e.next=3,r(t).catch(function(){});case 3:(o=e.sent)&&(localStorage.setItem("baiziUserToken",o),c.push("/read"),i());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,n=e.invalid,c=e.errorMessage;return r.a.createElement("div",{className:"ui segment",style:{width:"90%",maxWidth:"500px",margin:"0 auto"}},r.a.createElement("h1",{className:"ui center aligned header"},"\u6ce8\u518c"),r.a.createElement("form",{className:"ui form",onSubmit:t(this.onSignUpFormSubmit)},r.a.createElement(ne.a,{name:"username",label:"\u7528\u6237\u540d",component:this.renderField,type:"text"}),r.a.createElement(ne.a,{name:"password",label:"\u5bc6\u7801",component:this.renderField,type:"password"}),r.a.createElement("button",{className:"ui button",type:"submit",disabled:a|n},"\u6ce8\u518c")),c&&r.a.createElement("p",{style:{color:"red",marginTop:"5px"}},c))}}]),t}(n.Component),ue=Object(j.a)(Object(o.b)(function(e){return{errorMessage:e.user.errorMessage}},{createUser:function(e){return function(){var t=Object(k.a)(x.a.mark(function t(a){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e.username,e.password).catch(function(e){409===e.response.status?a({type:"DUPLICATE_USER",payload:{errorMessage:"\u6ce8\u518c\u5931\u8d25\uff1a\u8be5\u7528\u6237\u540d\u5df2\u5b58\u5728\uff01"}}):a({type:"LOGIN_ERROR",payload:{errorMessage:"\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u518d\u8bd5\u4e00\u6b21"}})});case 2:if(n=t.sent,!(r=n.token)){t.next=7;break}return a({type:"CREATE_USER",payload:{token:r}}),t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},getUser:F})(Object(re.a)({form:"SignUp",validate:function(e){var t={},a=new RegExp("^[-\\w@\\.]{1,20}$");return e.username?e.username.match(a)||(t.username="\u7528\u6237\u540d\u53ea\u80fd\u5305\u542b\u82f1\u8bed\u3001\u6570\u5b57\u3001\u201c_\u201d\u3001\u201c.\u201d\u548c\u201c@\u201d\uff0c\u4e14\u4e0d\u80fd\u8d85\u8fc7".concat(20,"\u4e2a\u5b57\u7b26")):t.username="\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a",(!e.password||e.password.length<6)&&(t.password="\u5bc6\u7801\u81f3\u5c11\u9700\u8981".concat(6,"\u4f4d\u6570")),t}})(oe))),se=function(){return r.a.createElement("div",{className:"ui warning message",style:{maxWidth:"62em",width:"90%",margin:"10vh auto"}},r.a.createElement("div",{className:"header"},"\u9875\u9762\u4e0d\u5b58\u5728\uff01"),"\u8bf7\u70b9\u51fb\u5de6\u4e0a\u89d2\u8fd4\u56de\u767e\u5b57\u672c\u4e3b\u9875")},le=(a(243),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"page-container"},r.a.createElement(d.a,null,r.a.createElement("div",{id:"content-wrap"},r.a.createElement(G,null),r.a.createElement(E.a,null,r.a.createElement(y,{path:"/",exact:!0,component:V}),r.a.createElement(O,{path:"/write",exact:!0,component:K}),r.a.createElement(O,{path:"/read",exact:!0,component:ee}),r.a.createElement(O,{path:"/search",exact:!0,component:te})," ",r.a.createElement(b.a,{path:"/signin",exact:!0,component:ie}),r.a.createElement(b.a,{path:"/signup",exact:!0,component:ue}),r.a.createElement(b.a,{component:se})))),r.a.createElement(ae,null))}}]),t}(n.Component)),me=a(250),pe=a(109),fe=Object(u.c)({baizis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BAIZIS":return t.payload;case"CREATE_BAIZI":return[t.payload].concat(Object(pe.a)(e));case"LOGOUT_USER":return[];default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":case"AUTH_USER":return t.payload;case"LOGOUT_USER":return{};case"DUPLICATE_USER":case"LOGIN_ERROR":return t.payload;case"GET_USER":return Object(N.a)({},e,t.payload);default:return e}},form:me.a}),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,de=Object(u.e)(fe,he(Object(u.a)(s.a)));i.a.render(r.a.createElement(o.a,{store:de},r.a.createElement(le,null)),document.getElementById("root"))}},[[110,2,1]]]);
//# sourceMappingURL=main.83831654.chunk.js.map